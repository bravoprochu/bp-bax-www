<div #bg @groupAppearing [style.background-image]="bgImageColor" class="bg" >
  <app-article-navigation [data]="data" [@opacityOverLeave]="isArticleNavOver ? 'over': 'leave'" class="article-navigation"
    [style.opacity]="isArticleNavOver ? 1 : 0.4 " (mouseover)="isArticleNavOver=true" (mouseleave)="isArticleNavOver=false"></app-article-navigation>

    <div *ngIf="!cf.isGtMd()">
      <svg x="50%" width="100%" height="100%" [attr.viewBox]="svgImageProp.viewBox.toString()" preserveAspectRation="xMidYMid meet">
        <title>{{data.title.title}}</title>
        <g *ngIf="isSVGImageIsReady">
          <g @svgBorderImage>
            <rect *ngFor="let rb of rectBorders" [attr.x]="rb.posX" [attr.y]="rb.posY" [attr.width]="rb.width"
              [attr.height]="rb.height" fill="none" [attr.stroke]="rb.color" [attr.rx]="rb.radius" [attr.ry]="rb.radius"
              [style.strokeWidth]="rb.strokeWidth" [style.strokeOpacity]="rb.strokeOpacity" [attr.transform]="rb.transform"></rect>
          </g>
          <image @opacityInit [attr.x]="svgImage.posX" [attr.y]="svgImage.posY" [attr.width]="svgImage.width" [attr.height]="svgImage.height"
            [attr.xlink:href]="data.miniInfo.imgUrl" [attr.transform]="svgImage.transform"></image>
          <!-- <g *ngFor="let rb of rectBorders; last as isLast">
            <rect *ngIf="isLast" [attr.x]="rb.posX" [attr.y]="rb.posY" [attr.width]="rb.width" [attr.height]="rb.height"
              fill="none" [attr.stroke]="rb.color" [attr.rx]="rb.radius" [attr.ry]="rb.radius" [style.strokeWidth]="rb.strokeWidth"
              [style.strokeOpacity]="rb.strokeOpacity" [attr.transform]="rb.transform"></rect>
          </g> -->
        </g>
        <svg:g *ngIf="data.youtubeUrl && isSVGImageIsReady" class="anim-init" svg-button-youtube x="50" y="700" height="400"
          width="400" title="zobacz clip {{data.title.title}} na Youtube" [url]="data.youtubeUrl"></svg:g>
      </svg>
      <app-facebook-button></app-facebook-button>
      <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="15px">
        <app-news-article-date *ngIf="!isSmall()" [date]="data.creationDate"></app-news-article-date>
        <h1 style="text-align: center">{{data.title.title | uppercase}}</h1>
      </div>
      <div class="content-text" [innerHtml]="data.text" [ngClass]="cf.isGtMd() ? 'content-text-big': null"></div>
    </div>



    <div *ngIf="cf.isGtMd()" fxLayout="row" style="min-height: 98vh" fxLayoutAlign="center center">
      <div fxFlex="100" fxLayout="column" fxLayoutAlign="center center" fxLayoutGap="10px" fxFlex.gt-md="65">
        <iframe *ngIf="data.youtubeEmbedUrl && !data.imgUrl" [ngClass]="isSmall() ? 'yt-sm' : 'yt'" [attr.src]="data.youtubeEmbedUrl"
          frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen>
        </iframe>
        <svg x="50%" style="min-height: 600px" width="100%" height="100%" [attr.viewBox]="svgImageProp.viewBox.toString()"
          preserveAspectRation="xMidYMid meet">
          <title>{{data.title.title}}</title>
          <g *ngIf="isSVGImageIsReady">
            <g @svgBorderImage>
              <rect *ngFor="let rb of rectBorders" [attr.x]="rb.posX" [attr.y]="rb.posY" [attr.width]="rb.width"
                [attr.height]="rb.height" fill="none" [attr.stroke]="rb.color" [attr.rx]="rb.radius" [attr.ry]="rb.radius"
                [style.strokeWidth]="rb.strokeWidth" [style.strokeOpacity]="rb.strokeOpacity" [attr.transform]="rb.transform"></rect>
            </g>
            <image [attr.x]="svgImage.posX" [attr.y]="svgImage.posY" [attr.width]="svgImage.width" [attr.height]="svgImage.height"
              [attr.xlink:href]="data.miniInfo.imgUrl" [attr.transform]="svgImage.transform"></image>
            <!-- <g *ngFor="let rb of rectBorders; last as isLast">
              <rect *ngIf="isLast" [attr.x]="rb.posX" [attr.y]="rb.posY" [attr.width]="rb.width" [attr.height]="rb.height"
                fill="none" [attr.stroke]="rb.color" [attr.rx]="rb.radius" [attr.ry]="rb.radius" [style.strokeWidth]="rb.strokeWidth"
                [style.strokeOpacity]="rb.strokeOpacity" [attr.transform]="rb.transform"></rect>
            </g> -->
          </g>
          <svg:g *ngIf="data.youtubeUrl && isSVGImageIsReady" svg-button-youtube x="50" y="700" height="400" width="400"
            title="zobacz clip {{data.title.title}} na Youtube" [url]="data.youtubeUrl"></svg:g>
        </svg>
        <app-facebook-button></app-facebook-button>
      </div>

      <div fxFlex="100" fxFlex.gt-md="35" fxLayout="column" fxLayoutGap="15px" fxLayoutAlign="center center">
        <app-news-article-date *ngIf="!isSmall()" [date]="data.creationDate"></app-news-article-date>
        <h1 style="text-align: center">{{data.title.title | uppercase}}</h1>
        <div class="content-text" [innerHtml]="data.text" [ngClass]="cf.isGtMd() ? 'content-text-big': null"></div>
      </div>

    </div>


    <!-- <div style="position: fixed; top: 25px;">
    <button [disabled]="!ns.isPrev(data)" (click)="getPrev()">prev</button>
    <button [disabled]="!ns.isNext(data)" (click)="getNext()">next</button>
    <button routerLink="/news">news</button>
  </div> -->
</div>